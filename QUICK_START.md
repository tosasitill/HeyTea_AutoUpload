# 快速开始指南

## 安装依赖

```bash
pip3 install -r requirements.txt
```

## 启动应用

```bash
python3 main.py
```

## 使用杯贴小助手

### 第一步：选择图片
- 点击"杯贴小助手" Tab
- 在左侧文件选择区点击选择图片
- 或直接拖放图片到该区域

### 第二步：选择处理模式
在"处理模式"下拉菜单中选择：
- **circle** - 圆形网格半调（质量最高，但较慢）
- **bayer** - Bayer 矩阵抖动（规则有序）
- **fs** - Floyd-Steinberg（最清晰但有噪声）

### 第三步：微调参数

#### 基础参数
| 参数 | 范围 | 建议值 | 说明 |
|-----|------|-------|------|
| 图像缩放 | 25-300% | 100% | 原始尺寸 |
| 网格大小 | 2-16px | 4px | 点的密度（仅圆形模式） |
| 图案形状 | 圆/方/十 | 圆 | 网点形状（仅圆形模式） |
| 网格角度 | 0-90° | 45° | 网格旋转角度（仅圆形模式） |
| Gamma | 0.2-3.0 | 1.0 | 亮度调整 |
| 对比度 | -100 ~ 100 | 0 | 黑白对比 |

#### 高级参数（边缘保护）
勾选"边缘保护"启用：
- **更黑阈值** - 自动加黑的灰度值（推荐 20-60）
- **更白阈值** - 白色保留的灰度值上限（推荐 100-150）
- **灵敏度** - 边缘检测灵敏度（推荐 40-80）

### 第四步：预览效果

**主图预览**（左下）
- 显示 596×832px 的处理结果
- 黑白二值化图像

**打印预览**（右下）
- 模拟 36×76mm 标签贴实际效果
- 左右两侧红色区域为 6% 打印误差区

### 第五步：导出成品

1. 点击"导出成品 PNG"按钮
2. 选择保存位置
3. 文件名自动生成（`原始名_596x832_bw.png`）

## 推荐参数组合

### 线稿类（黑白线条）
```
模式：circle
网格：6-8px
形状：圆
角度：45°
Gamma：1.0
对比度：20-30
边缘保护：开
```

### 细节类（摄影照片）
```
模式：fs（Floyd-Steinberg）
Gamma：0.8-1.2
对比度：-10 ~ 10
边缘保护：关
```

### 高对比度类（图案、漫画）
```
模式：circle
网格：4px
形状：方
角度：0°
Gamma：1.0
对比度：30-50
边缘保护：开
```

## 常见问题

### Q: 处理很慢
**A:** 使用 Bayer 或 Floyd-Steinberg 模式更快。圆形网格算法可能需要数秒。

### Q: 预览和最终结果不一致
**A:** 预览是缩小的，最终导出是完整 596×832px。多尝试不同参数。

### Q: 图片看起来很模糊
**A:** 尝试启用"边缘保护"并调整阈值参数。

### Q: 某些部分变得太黑
**A:** 降低对比度或启用边缘保护的"更黑阈值"。

## 高级技巧

### 多次处理
1. 导出图片
2. 作为新输入重新处理
3. 可获得特殊效果

### 参数搜索
从推荐参数开始，逐步微调找到最佳效果。

### 预设图片
准备几张不同类型的测试图片，找到通用参数配置。

## 故障排除

### 应用启动失败
检查是否安装了所有依赖：
```bash
pip3 install numpy Pillow requests pycryptodome pywebview
```

### 图片选择无反应
确保选择的是有效的图片格式（JPG、PNG、GIF、BMP）。

### 预览显示不正确
尝试切换到其他 Tab 再返回，或点击"清空"重新开始。

### macOS 滚动不工作
这是已知的 Tkinter 限制，但已在应用中进行了优化处理。

## 键盘快捷键

- 暂无快捷键（可在未来版本中添加）

## 技术支持

查看 `CUP_STICKER_IMPLEMENTATION.md` 了解技术细节。
